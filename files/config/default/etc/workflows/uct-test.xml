<?xml version="1.0" encoding="UTF-8" ?>
<definition xmlns="http://workflow.opencastproject.org">

  <id>test</id>
  <title>Test send email</title>
  <tags>
    <tag>archive</tag>
  </tags>
  <description/>
  <configuration_panel />

  <!-- Load workflow properties from metadata: update some workflow properties -->
    <operation
      id="execute-once"
      max-attempts="3"
      retry-strategy="hold"
      fail-on-error="true"
      exception-handler-workflow="partial-error"
      description="Load workflow properties from settings in series">
      <configurations>
        <configuration key="exec">/opt/opencast/wfexec/get_organizer_details.pl</configuration>
        <configuration key="load">0.1</configuration>
        <configuration key="params">#{id} #{out}</configuration>
        <configuration key="output-filename">series_organizer.txt</configuration>
        <configuration key="set-workflow-properties">true</configuration>
        <configuration key="expected-type">Attachment</configuration>
      </configurations>
    </operation>

  <operations>
    <operation
      id="send-email"
      fail-on-error="true"
      exception-handler-workflow="partial-error"
      description="Sending empty venue email to organizer and notification list">
      <configurations>
        <!-- <configuration key="to">${organizer_email}</configuration>
        <configuration key="cc">${notification_list}</configuration> -->
        <configuration key="to">ngonidzashe.choga@uct.ac.za</configuration>
        <!-- <configuration key="cc">corne.oosthuizen@uct.ac.za</configuration> -->
        <configuration key="subject">Empty venue for:</configuration>
        <configuration key="body-template-file">empty_venue_notification</configuration>
        <configuration key="use-html">true</configuration>
      </configurations>
    </operation>

  </operations>

</definition>
